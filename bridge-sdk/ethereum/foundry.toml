[profile.default]
src = "src"
out = "out"
test = "test"
libs = ["lib"]
optimizer = true
optimizer_runs = 10000
via_ir = true
ffi = true
memory_limit = 1073741824
gas_limit = "18446744073709551615"

allow_paths = ["../../contracts/src/", "../../contracts/lib/"]

# Suppress compiler warnings from vendored submodules
ignored_warnings_from = ["lib/", "../../contracts/lib/"]
ignored_error_codes = [
    2424,  # Natspec memory-safe-assembly deprecated
    3420,  # Source file does not specify required compiler version
    5667,  # Unused function parameter
]

remappings = [
    # Cross-project imports
    "@world-id/=../../contracts/src/",
    "lib/oprf-key-registry/=../../contracts/lib/oprf-key-registry/",
    "forge-std/=../../contracts/lib/forge-std/src/",

    # OpenZeppelin (local lib/ copies — v5.5.0 with ERC-7786 support)
    "@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/",
    "@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/",

    # Our code → optimism contracts-bedrock
    "@optimism-bedrock/=lib/optimism/packages/contracts-bedrock/",

    # Optimism internal import resolution (transitive deps within contracts-bedrock)
    "src/libraries/=lib/optimism/packages/contracts-bedrock/src/libraries/",
    "src/dispute/=lib/optimism/packages/contracts-bedrock/src/dispute/",
    "src/L2/=lib/optimism/packages/contracts-bedrock/src/L2/",
    "src/universal/=lib/optimism/packages/contracts-bedrock/src/universal/",
    "interfaces/=lib/optimism/packages/contracts-bedrock/interfaces/",
    "scripts/libraries/=lib/optimism/packages/contracts-bedrock/scripts/libraries/",

]

fs_permissions = [{ access = "read", path = "test/fixtures" }]

[lint]
exclude_lints = ["screaming-snake-case-const"]
ignore = ["lib"]
lint_on_build = false

[fmt]
ignore = ["lib"]
